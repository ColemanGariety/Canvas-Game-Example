// Generated by CoffeeScript 1.6.2
var __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

window.Enemy = (function(_super) {
  __extends(Enemy, _super);

  function Enemy(name, health, type) {
    if (name) {
      this.name = "" + name + "'s Corpse";
    } else {
      this.name = "A Buried Corpse";
    }
    this.health = health || 100;
    this.type = type || "corpse";
    console.log("" + this.name + " gets up and moves");
    this.spritesheet = new createjs.SpriteSheet({
      images: ["images/corpse.png"],
      frames: [[0, 111, 111, 111, 0, 55, 55], [111, 111, 111, 111, 0, 55, 55], [222, 111, 111, 111, 0, 55, 55], [333, 111, 111, 111, 0, 55, 55], [0, 555, 111, 111, 0, 55, 55], [111, 555, 111, 111, 0, 55, 55], [0, 888, 111, 111, 0, 55, 55], [111, 888, 111, 111, 0, 55, 55], [0, 444, 111, 111, 0, 55, 55], [111, 444, 111, 111, 0, 55, 55], [222, 444, 111, 111, 0, 55, 55], [333, 444, 111, 111, 0, 55, 55], [0, 777, 111, 111, 0, 55, 55], [111, 777, 111, 111, 0, 55, 55], [222, 777, 111, 111, 0, 55, 55], [333, 777, 111, 111, 0, 55, 55]],
      animations: {
        standd: {
          frames: [6, 7],
          frequency: 20
        },
        standu: {
          frames: [4, 5],
          frequency: 20
        },
        runu: {
          frames: [8, 9, 10, 11],
          frequency: 6
        },
        rund: {
          frames: [12, 13, 14, 15],
          frequency: 6
        },
        runr: {
          frames: [0, 1, 2, 3],
          frequency: 6
        }
      }
    });
    createjs.SpriteSheetUtils.addFlippedFrames(this.spritesheet, true);
    this.bitmap = new createjs.BitmapAnimation(this.spritesheet);
    this.bitmap.x = window.innerWidth / 2 + (Math.random() * (300 * 2) - 300);
    this.bitmap.y = window.innerHeight / 2 + (Math.random() * (300 * 2) - 300);
    this.bitmap.gotoAndPlay("standd");
    this.actions = [];
    game.world.addChild(this.bitmap);
    game.enemies.push(this);
  }

  Enemy.move = function(enemy) {
    var direction, ex, ey, px, py;

    px = -game.world.x + game.players[0].bitmap.x;
    py = -game.world.y + game.players[0].bitmap.y;
    ex = enemy.bitmap.x;
    ey = enemy.bitmap.y;
    direction = Math.atan2(px - ex, py - ey);
    enemy.bitmap.x += Math.sin(direction) / 2;
    return enemy.bitmap.y += Math.cos(direction) / 2;
  };

  return Enemy;

})(Game);

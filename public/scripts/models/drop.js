// Generated by CoffeeScript 1.6.2
window.Drop = (function() {
  function Drop(dropper, name) {
    var drop, drops, rand, _i, _len;

    switch (dropper.type) {
      case "corpse":
        drops = [
          {
            name: "Machinegun Cartridge",
            probability: .1
          }, {
            name: "dollars",
            probability: .2
          }
        ];
    }
    drops.sort(function(a, b) {
      return a.probability - b.probability;
    });
    rand = Math.random();
    for (_i = 0, _len = drops.length; _i < _len; _i++) {
      drop = drops[_i];
      if (drop.probability >= rand) {
        this.name = drop.name;
        break;
      }
    }
    if (this.name) {
      switch (this.name) {
        case "Machinegun Cartridge":
          this.shape = new createjs.Shape();
          this.shape.graphics.beginFill("#000").drawRect(0, 0, 7, 14);
          this.shape.x = dropper.bitmap.x;
          this.shape.y = dropper.bitmap.y;
          game.world.addChild(this.shape);
          game.drops.push(this);
          console.log("" + dropper.name + " dropped a " + this.name);
      }
    }
  }

  Drop.pickup = function(player, drop) {
    game.world.removeChild(drop.shape);
    game.drops.splice(game.drops.indexOf(drop), 1);
    switch (drop.name) {
      case "Machinegun Cartridge":
        player.cartridges.machinegun++;
        Hud.update("ammo");
        createjs.Sound.play("/audio/reload.m4a");
    }
    return console.log("" + player.name + " picked up a " + drop.name);
  };

  return Drop;

})();
